<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/examine.css">
    <link rel="stylesheet" type="text/css" href="./css/myNavbar.css">
    <title>成员管理</title>

</head>
<body>
    <div class="navbar">
    
        <a href="#" class="logo">每日英语</a>
        <a href="index.html">首页</a>
        <a href="#">关于</a>
        <a href="#">联系我们</a>
    
    <div class="dropdown">
        <button class="dropbtn">发布任务</button>
        <div class="dropdown-content">
            <a href="#">考试</a>
            <a href="#">作业</a>
            <a href="#">每日单词</a>
        </div>
    </div>
    <div class="search-container">
        <form action="#">
            <input type="text" placeholder="Search.." name="search">
            <button type="submit">搜索</button>
        </form>
    </div>
</div>
    <div class="background">
    <h1>成员审核</h1> 
    <div class="search-container2">  
        <input type="text" class="search-input" placeholder="申请用户查询">  
        <button class="search-button" onclick="searchFunction()">搜索</button>  
    </div> 

    <div class="box">
        <button class="button" id="button2">团队扩容申请</button>
        <table>
            <thead>
            <tr>
                <th class="list1">成员名称</th>
                <th class="list2">加入时间</th>
                <th class="list3">累计打卡</th>
                <th class="list4">操作</th>
            </tr>
            </thead>
            <tbody id="userList">
            
            </tbody>
        </table>
    </div>

    <script>  
     

     window.addEventListener('load', fetchUsers);
    function fetchUsers() {
        // 发起请求获取数据
        fetch('/data')
            .then(response => response.json()) // 解析响应为JSON
            .then(users => {
                const userList = document.getElementById('userList'); // 获取用户列表元素
                userList.innerHTML = ""//清理列表
                users.forEach(user => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                    <td>${user.userID}</td>
                    <td>${user.username}</td>
                    <td>${user.status}</td>
                    <td>
                        <button class="enable" onclick="updateStatus(${user.userID},true)">同意</button>
                        <button class="disable" onclick="updateStatus(${user.userID},false)">拒绝</button>
                    </td>

                `;
                    userList.appendChild(row);
                });
            })
            .catch(error => console.error('Error:', error)); // 处理任何错误
    }
        </script>  
</body>
</html>